<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-title>
            Account
        </ion-title>
        <ion-buttons slot="start">
            <ion-back-button></ion-back-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

    <ion-list>
        <form [formGroup]="accountForm">
            <!--username-->
            <ion-item>
                <ion-label *ngIf="!f['username'].errors" position="floating">Username</ion-label>
                <ion-label *ngIf="submitted && f['username'].errors" position="floating">
                    <div *ngIf="f['username'].errors['required']">Username ist erforderlich*</div>
                </ion-label>
                <ion-input formControlName="username" [ngClass]="{ 'is-invalid': submitted && f['username'].errors }" type="text" class="form-control" placeholder="Username..." readonly></ion-input>
            </ion-item>

            <!--email-->
            <ion-item>
                <ion-label *ngIf="!f['email'].errors" position="floating">E-Mail</ion-label>
                <ion-label *ngIf="submitted && f['email'].errors" position="floating">
                    <div *ngIf="f['email'].errors['required']">E-Mail ist erforderlich*</div>
                </ion-label>
                <ion-input formControlName="email" [ngClass]="{ 'is-invalid': submitted && f['email'].errors }" type="text" class="form-control" placeholder="E-Mail..." readonly></ion-input>
            </ion-item>

            <!--Vorname-->
            <ion-item>
                <ion-label *ngIf="!f['vorname'].errors" position="floating">Vorname</ion-label>
                <ion-label *ngIf="submitted && f['vorname'].errors" position="floating">
                    <div *ngIf="f['vorname'].errors['required']">Vorname ist erforderlich*</div>
                </ion-label>
                <ion-input formControlName="vorname" [ngClass]="{ 'is-invalid': submitted && f['vorname'].errors }" type="text" class="form-control" placeholder="Vorname..."></ion-input>
            </ion-item>

            <!--Nachname-->
            <ion-item>
                <ion-label *ngIf="!f['nachname'].errors" position="floating">Nachname</ion-label>
                <ion-label *ngIf="submitted && f['nachname'].errors" position="floating">
                    <div *ngIf="f['nachname'].errors['required']">Nachname ist erforderlich*</div>
                </ion-label>
                <ion-input formControlName="nachname" [ngClass]="{ 'is-invalid': submitted && f['nachname'].errors }" type="text" class="form-control" placeholder="Nachname..."></ion-input>
            </ion-item>

            <!--Strasse-->
            <ion-item>
                <ion-label *ngIf="!f['strasse'].errors" position="floating">Straße</ion-label>
                <ion-label *ngIf="submitted && f['strasse'].errors" position="floating">
                    <div *ngIf="f['strasse'].errors['required']">Straße ist erforderlich*</div>
                </ion-label>
                <ion-input formControlName="strasse" [ngClass]="{ 'is-invalid': submitted && f['strasse'].errors }" type="text" class="form-control" placeholder="Straße..."></ion-input>
            </ion-item>

            <!--Hausnr-->
            <ion-item>
                <ion-label *ngIf="!f['hausnr'].errors" position="floating">Hausnummer</ion-label>
                <ion-label *ngIf="submitted && f['hausnr'].errors" position="floating">
                    <div *ngIf="f['hausnr'].errors['required']">Hausnummer ist erforderlich*</div>
                </ion-label>
                <ion-input formControlName="hausnr" [ngClass]="{ 'is-invalid': submitted && f['hausnr'].errors }" type="text" class="form-control" placeholder="Hausnummer..."></ion-input>
            </ion-item>

            <!--PLZ-->
            <ion-item>
                <ion-label *ngIf="!f['plz'].errors" position="floating">PLZ</ion-label>
                <ion-label *ngIf="submitted && f['plz'].errors" position="floating">
                    <div *ngIf="f['plz'].errors['required']">PLZ ist erforderlich*</div>
                </ion-label>
                <ion-input formControlName="plz" [ngClass]="{ 'is-invalid': submitted && f['plz'].errors }" type="text" class="form-control" placeholder="PLZ..."></ion-input>
            </ion-item>
            
            <!--Ort-->
            <ion-item>
                <ion-label *ngIf="!f['ort'].errors" position="floating">Ort</ion-label>
                <ion-label *ngIf="submitted && f['ort'].errors" position="floating">
                    <div *ngIf="f['ort'].errors['required']">Ort ist erforderlich*</div>
                </ion-label>
                <ion-input formControlName="ort" [ngClass]="{ 'is-invalid': submitted && f['ort'].errors }" type="text" class="form-control" placeholder="Ort..."></ion-input>
            </ion-item>
        </form>
    </ion-list>

    <ion-row class="ion-justify-content-end account-actions">
        <!--Speichern-->
        <ion-button *ngIf="!this.isCreated" (click)="this.save()" shape="round">Speichern</ion-button>
        
        <!--Aktualisieren-->
        <ion-button *ngIf="this.isCreated" (click)="this.update()" shape="round">Aktualisieren</ion-button>
    </ion-row>


    <!--Account löschen-->
    <ion-list>
        <ion-item>
            <ion-label>Account löschen</ion-label>
            <ion-button (click)="this.delete()" color="danger" shape="round">Account löschen</ion-button>
            <ion-label *ngIf="this.keycloakAccount">Keycloak Account-ID: {{ this.keycloakAccount.id }}</ion-label>
        </ion-item>
    </ion-list>
    
    <!---->
    <div class="delete-account-container">
        <p *ngIf="this.keycloakAccount">Keycloak Account-ID: {{ this.keycloakAccount.id }}</p>

        <ion-button color="success" (click)="this.successMessageTest()" class="btn btn-success">Test SuccessMessage!</ion-button>
        <ion-button color="danger" (click)="this.errorMessageTest()" class="btn btn-danger">Test ErrorMessage!</ion-button>
        <ion-button color="tertiary" (click)="this.testConfirmModal()" class="btn btn-primary">Test ConfirmModal!</ion-button>
        <ion-button color="warning" (click)="this.testWarningModal()" class="btn btn-primary">Test WarningModal!</ion-button>
    </div>
    <!---->
</ion-content>
